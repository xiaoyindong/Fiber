{"version":3,"sources":["webpack://fiber/./src/react/Component/index.js","webpack://fiber/./src/react/CreateElement/index.js","webpack://fiber/./src/react/DOM/createDOMElement.js","webpack://fiber/./src/react/DOM/index.js","webpack://fiber/./src/react/DOM/updateNodeElement.js","webpack://fiber/./src/react/Misc/Arrified/index.js","webpack://fiber/./src/react/Misc/CreateTaskQueue/index.js","webpack://fiber/./src/react/Misc/createReactInstance/index.js","webpack://fiber/./src/react/Misc/createStateNode/index.js","webpack://fiber/./src/react/Misc/getTag/index.js","webpack://fiber/./src/react/Misc/index.js","webpack://fiber/./src/react/index.js","webpack://fiber/./src/react/reconciliation/index.js","webpack://fiber/webpack/bootstrap","webpack://fiber/webpack/runtime/define property getters","webpack://fiber/webpack/runtime/hasOwnProperty shorthand","webpack://fiber/webpack/runtime/make namespace object","webpack://fiber/./src/index.js"],"names":["Component","props","createElement","type","children","childElements","concat","reduce","result","child","Object","push","textContent","assign","createDOMElement","virtualDOM","newElement","document","createTextNode","updateNodeElement","oldVirtualDOM","newProps","oldProps","parent","stateNode","appencChild","replaceChild","keys","forEach","propName","newPropsValue","oldPropsValue","startsWith","eventName","toLowerCase","slice","addEventListener","removeEventListener","setAttribute","removeAttribute","arrified","arg","Array","isArray","createTaskQueue","taskQueue","item","pop","shift","isEmpty","length","createReactInstance","fiber","instance","tag","createStateNode","getTag","vdom","getPrototypeOf","subTask","pendingCommit","commitAllWork","effects","effectTag","removeChild","alternate","parentFiber","appendChild","__rootFiberContainer","getFirstTask","task","dom","reconcileChildren","arrifiedChildren","index","numberOfElements","element","newFiber","prevFiber","sibling","executeTask","render","currentExecutelyFiber","workLoop","deadline","timeRemaining","performTask","requestIdleCallback","jsx","root","getElementById","setTimeout"],"mappings":"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","file":"bundle.js","sourcesContent":["export class Component {\n    constructor(props) {\n        this.props = props;\n    }\n}","export default function createElement(type, props, ...children) {\n    // 遍历children对象\n    const childElements = [].concat(...children).reduce((result, child) => {\n      // 判断child不能是布尔也不能是null\n      // 因为使用reduce，所以result是前一次循环的返回值，最终返回result就可以\n      if (child !== false && child !== true && child !== null) {\n        if (child instanceof Object) {\n          result.push(child); // 是对象直接返回\n        } else {\n          // 不是对象 调用createElement方法生成一个对象\n          result.push(createElement('text', {\n            textContent: child\n          }));\n        }\n      }\n      return result;\n    }, [])\n    return {\n      type,\n      props: Object.assign({ children: childElements}, props)\n    }\n  }\n  ","import updateNodeElement from \"./updateNodeElement\";\n\nexport default function createDOMElement(virtualDOM) {\n    let newElement = null;\n    if (virtualDOM.type === 'text') {\n        // 文本节点 使用createTextNode创建\n        newElement = document.createTextNode(virtualDOM.props.textContent);\n    } else {\n        // 元素节点 使用 createElement 创建\n        newElement = document.createElement(virtualDOM.type);\n        updateNodeElement(newElement, virtualDOM);\n    }\n    return newElement;\n}","export { default as createDOMElement } from './createDOMElement';\nexport { default as updateNodeElement } from './updateNodeElement';","export default function updateNodeElement(newElement, virtualDOM, oldVirtualDOM = {}) {\n    // 获取节点对应的属性对象\n    const newProps = virtualDOM.props || {};\n    // 获取旧的属性对象\n    const oldProps = oldVirtualDOM.props || {};\n\n    if (virtualDOM.type === 'text') {\n        if (newProps.textContent !== oldProps.textContent) {\n            // 判断父级节点是否相同，如果不同就将当前文本追加到父级\n            if (virtualDOM.parent.type !== oldVirtualDOM.parent.type) {\n                virtualDOM.parent.stateNode.appencChild(document.createTextNode(newProps.textContent))\n            } else {\n                // 新的文本节点替换旧的文本节点\n                virtualDOM.parent.stateNode.replaceChild(document.createTextNode(newProps.textContent), oldVirtualDOM.stateNode);\n            }\n        }\n        return;\n    }\n\n    Object.keys(newProps).forEach(propName => {\n        // 新的属性值\n        const newPropsValue = newProps[propName];\n        // 旧的属性值\n        const oldPropsValue = oldProps[propName];\n        // 对比是否相同\n        if (newPropsValue !== oldPropsValue) {\n            // 判断是否是事件属性\n            if (propName.startsWith('on')) {\n                // 截取出事件名称\n                const eventName = propName.toLowerCase().slice(2);\n                // 为元素添加事件\n                newElement.addEventListener(eventName, newPropsValue);\n                // 如果存在原有事件，需要删除掉。\n                if (oldPropsValue) {\n                    newElement.removeEventListener(eventName, oldPropsValue);\n                }\n            } else if (propName === 'value' || propName === 'checked') {\n                // 如果属性名是value或者checked不能使用setAttribute来设置，直接以属性方式设置即可\n                newElement[propName] = newPropsValue;\n            } else if (propName !== 'children') {\n                // 排除children\n                if (propName === 'className') {\n                    newElement.setAttribute('class', newPropsValue)\n                } else {\n                    newElement.setAttribute(propName, newPropsValue)\n                }\n            }\n        }\n    })\n    // 判断属性被删除的情况\n    Object.keys(oldProps).forEach(propName => {\n        // 新的属性值\n        const newPropsValue = newProps[propName];\n        // 旧的属性值\n        const oldPropsValue = oldProps[propName];\n        if (!newPropsValue) {\n            // 判断是否是事件属性\n            if (propName.startsWith('on')) {\n                // 截取出事件名称\n                const eventName = propName.toLowerCase().slice(2);\n                // 删除事件\n                newElement.removeEventListener(eventName, oldPropsValue);\n            } else if (propName !== 'children') {\n                newElement.removeAttribute(propName);\n            }\n        }\n    })\n}","const arrified = arg => Array.isArray(arg) ? arg : [arg]\n\nexport default arrified;","const createTaskQueue = () => {\n    const taskQueue = [];\n    return {\n        push: item => { // 向任务队列中添加任务\n            return taskQueue.push(item);\n        },\n        pop: () => { // 从任务队列中获取任务\n            return taskQueue.shift();\n        },\n        isEmpty: () => { // 判断是否存在任务\n            taskQueue.length === 0\n        }\n    }\n}\n\nexport default createTaskQueue;","export const createReactInstance = fiber => {\n    let instance = null;\n    \n    if (fiber.tag === 'class_component') {\n        instance = new fiber.type(fiber.props)\n    } else {\n        instance = fiber.type;\n    }\n    return instance;\n}","import { createDOMElement } from '../../DOM'\nimport { createReactInstance } from '../createReactInstance';\n\nconst createStateNode = fiber => {\n    // 普通节点\n    if (fiber.tag === 'host_component') {\n        return createDOMElement(fiber)\n    } else {\n        // 组件\n        return createReactInstance(fiber)\n    }\n}\n\nexport default createStateNode;","import { Component } from '../../Component';\nconst getTag = vdom => {\n    // 如果是普通节点\n    if (typeof vdom.type === 'string') {\n        return 'host_component'\n    } else if (Object.getPrototypeOf(vdom.type) === Component) {\n        // 如果是类组件\n        return 'class_component'\n    } else {\n        // 函数组件\n        return 'function_component'\n    }\n}\n\nexport default getTag;","export { default as createTaskQueue } from './CreateTaskQueue';\nexport { default as arrified } from './Arrified';\nexport { default as createStateNode } from './createStateNode';\nexport { default as getTag } from './getTag';\n","import createElement from './CreateElement';\n\nexport { render } from './reconciliation'\n\nexport { Component } from './Component';\n\nexport default {\n    createElement,\n}","import {\n    updateNodeElement\n} from '../DOM';\nimport {\n    createTaskQueue,\n    arrified,\n    createStateNode,\n    getTag\n} from '../Misc';\n\nconst taskQueue = createTaskQueue();\n\nlet subTask = null;\n\nlet pendingCommit = null;\n\nconst commitAllWork = fiber => {\n    fiber.effects.forEach(item => {\n        if (item.effectTag === 'delete') {\n            item.parent.stateNode.removeChild(item.stateNode);\n        } else if (item.effectTag === 'update') {\n            // 更新操作\n            if (item.type === item.alternate.type) {\n                // 节点类型相同\n                updateNodeElement(item.stateNode, item, item.alternate);\n            } else {\n                // 节点类型不同\n                item.parent.stateNode.replaceChild(item.stateNode, item.alternate.stateNode);\n            }\n        } else if (item.effectTag === 'placement') {\n            // 追加节点\n            let fiber = item;\n            let parentFiber = item.parent\n            while (parentFiber.tag === 'class_component' || parentFiber.tag === 'function_component') {\n                parentFiber = parentFiber.parent;\n            }\n            if (fiber.tag === 'host_component') {\n                parentFiber.stateNode.appendChild(fiber.stateNode);\n            }\n        }\n    })\n    // 备份旧的Fiber节点对象\n    fiber.stateNode.__rootFiberContainer = fiber;\n}\n\nconst getFirstTask = () => {\n    // 从任务队列中获取任务\n    const task = taskQueue.pop();\n    // 返回最外层节点Fiber对象\n    return {\n        props: task.props,\n        stateNode: task.dom,\n        tag: 'host_root',\n        effects: [],\n        child: null,\n        alternate: task.dom.__rootFiberContainer\n    }\n}\n\nconst reconcileChildren = (fiber, children) => {\n    // 将children转换成数组\n    const arrifiedChildren = arrified(children);\n    // 循环 children 使用的索引\n    let index = 0;\n    // children 数组中元素的个数\n    let numberOfElements = arrifiedChildren.length;\n    // 循环过程中的循环项 就是子节点的 virtualDOM 对象\n    let element = null;\n    // 当前正在构建的的Fiber\n    let newFiber = null;\n    // 存储前一个节点，用于构建兄弟关系\n    let prevFiber = null;\n\n    let alternate = null;\n    // 如果有对象就获取子节点\n    if (fiber.alternate && fiber.alternate.child) {\n        // 如果找得到这个子节点就是children数组中的第一个节点的备份节点\n        alternate = fiber.alternate.child;\n    }\n    while (index < numberOfElements || alternate) {\n        // 子级虚拟DOM对象\n        element = arrifiedChildren[index];\n        // 如果element不存在，alternate存在，就是删除\n        if (!element && alternate) {\n            // 删除节点\n            alternate.effectTag = 'delete'\n            // 添加到父级的effects数组中\n            fiber.effects.push(alternate);\n        } else if (element && alternate) {\n            // 更新操作\n            newFiber = {\n                type: element.type,\n                props: element.props,\n                tag: getTag(element),\n                effects: [],\n                effectTag: 'update', // 新增\n                parent: fiber,\n                alternate,\n            }\n            if (element.type === alternate.type) {\n                // 类型相同\n                newFiber.stateNode = alternate.stateNode;\n            } else {\n                // 类型不同\n                newFiber.stateNode = createStateNode(newFiber);\n            }\n        } else if (element && !alternate) {\n            // 初始渲染\n            // 子级fiber\n            newFiber = {\n                type: element.type,\n                props: element.props,\n                tag: getTag(element),\n                effects: [],\n                effectTag: 'placement', // 新增\n                parent: fiber,\n            }\n            // 获取节点对象\n            newFiber.stateNode = createStateNode(newFiber);\n        }\n\n        // 如果第一个子节点就赋值到fiber上\n        if (index === 0) {\n            fiber.child = newFiber;\n        } else if (element) {\n            // 否则放在前一个的兄弟节点上\n            prevFiber.sibling = newFiber;\n        }\n        // 更新alternate\n        if (alternate && alternate.sibling) {\n            alternate = alternate.sibling;\n        } else {\n            alternate = null;\n        }\n        prevFiber = newFiber;\n        index++;\n    }\n}\n\nconst executeTask = fiber => {\n    // 构建子级fiber对象\n    if (fiber.tag === 'class_component') {\n        reconcileChildren(fiber, fiber.stateNode.render())\n    } else if (fiber.tag === 'function_component') {\n        reconcileChildren(fiber, fiber.stateNode(fiber.props))\n    } else {\n        reconcileChildren(fiber, fiber.props.children)\n    }\n    // 有子级返回子级\n    if (fiber.child) {\n        return fiber.child\n    }\n    // 存储当前正在处理的对象\n    let currentExecutelyFiber = fiber;\n\n    while (currentExecutelyFiber.parent) {\n        currentExecutelyFiber.parent.effects = currentExecutelyFiber.parent.effects.concat(currentExecutelyFiber.effects.concat(currentExecutelyFiber))\n        // 有同级返回同级\n        if (currentExecutelyFiber.sibling) {\n            return currentExecutelyFiber.sibling\n        }\n        // 没有同级将父级给到循环，循环检查父级\n        currentExecutelyFiber = currentExecutelyFiber.parent\n    }\n    pendingCommit = currentExecutelyFiber;\n}\n\nconst workLoop = deadline => {\n    // 如果子任务不存在获取一个任务\n    if (!subTask) {\n        subTask = getFirstTask()\n    }\n    // 任务存在并且浏览器空余时间大于1ms执行任务\n    while (subTask && deadline.timeRemaining() > 1) {\n        subTask = executeTask(subTask);\n    }\n    // 执行第二阶段\n    if (pendingCommit) {\n        commitAllWork(pendingCommit)\n    }\n}\n\nconst performTask = deadline => {\n    workLoop(deadline);\n    // 判断任务是否存在，判断队列中是否有任务没有执行\n    if (subTask || !taskQueue.isEmpty()) {\n        requestIdleCallback(performTask)\n    }\n}\n\nexport const render = (element, dom) => {\n    // 1. 向任务队列中添加任务\n    taskQueue.push({\n        dom, // 父级\n        props: {\n            children: element // 子级\n        }\n    })\n    // 2. 指定在浏览器空闲时执行任务\n    requestIdleCallback(performTask)\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { render, Component } from './react';\nconst jsx = <div>\n    <p>Hello Fiber</p>\n    <p>Hi Fiber</p>\n</div>\n\nconst root = document.getElementById('root');\n\nrender(jsx, root)\n\nsetTimeout(() => {\n    const jsx = <div>\n        <p>Hi React</p>\n    </div>\n    render(jsx, root)\n}, 2000)\n"],"sourceRoot":""}