{"version":3,"sources":["webpack://fiber/./src/react/Component/index.js","webpack://fiber/./src/react/CreateElement/index.js","webpack://fiber/./src/react/DOM/createDOMElement.js","webpack://fiber/./src/react/DOM/index.js","webpack://fiber/./src/react/DOM/updateNodeElement.js","webpack://fiber/./src/react/Misc/Arrified/index.js","webpack://fiber/./src/react/Misc/CreateTaskQueue/index.js","webpack://fiber/./src/react/Misc/createReactInstance/index.js","webpack://fiber/./src/react/Misc/createStateNode/index.js","webpack://fiber/./src/react/Misc/getRoot/index.js","webpack://fiber/./src/react/Misc/getTag/index.js","webpack://fiber/./src/react/Misc/index.js","webpack://fiber/./src/react/index.js","webpack://fiber/./src/react/reconciliation/index.js","webpack://fiber/webpack/bootstrap","webpack://fiber/webpack/runtime/define property getters","webpack://fiber/webpack/runtime/hasOwnProperty shorthand","webpack://fiber/webpack/runtime/make namespace object","webpack://fiber/./src/index.js"],"names":["Component","props","partialState","scheduleUpdate","createElement","type","children","childElements","concat","reduce","result","child","Object","push","textContent","assign","createDOMElement","virtualDOM","newElement","document","createTextNode","updateNodeElement","oldVirtualDOM","newProps","oldProps","parent","stateNode","appencChild","replaceChild","keys","forEach","propName","newPropsValue","oldPropsValue","startsWith","eventName","toLowerCase","slice","addEventListener","removeEventListener","setAttribute","removeAttribute","arrified","arg","Array","isArray","createTaskQueue","taskQueue","item","pop","shift","isEmpty","length","createReactInstance","fiber","instance","tag","createStateNode","getRoot","__fiber","getTag","vdom","getPrototypeOf","subTask","pendingCommit","commitAllWork","effects","effectTag","removeChild","alternate","parentFiber","appendChild","__rootFiberContainer","getFirstTask","task","from","root","dom","reconcileChildren","arrifiedChildren","index","numberOfElements","element","newFiber","prevFiber","sibling","executeTask","state","render","currentExecutelyFiber","workLoop","deadline","timeRemaining","performTask","requestIdleCallback","jsx","getElementById","Demo","name","setState"],"mappings":"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","file":"bundle.js","sourcesContent":["import {\n    scheduleUpdate\n} from '../reconciliation';\nexport class Component {\n    constructor(props) {\n        this.props = props;\n    }\n\n    setState(partialState) {\n        scheduleUpdate(this, partialState)\n    }\n}","export default function createElement(type, props, ...children) {\n    // 遍历children对象\n    const childElements = [].concat(...children).reduce((result, child) => {\n      // 判断child不能是布尔也不能是null\n      // 因为使用reduce，所以result是前一次循环的返回值，最终返回result就可以\n      if (child !== false && child !== true && child !== null) {\n        if (child instanceof Object) {\n          result.push(child); // 是对象直接返回\n        } else {\n          // 不是对象 调用createElement方法生成一个对象\n          result.push(createElement('text', {\n            textContent: child\n          }));\n        }\n      }\n      return result;\n    }, [])\n    return {\n      type,\n      props: Object.assign({ children: childElements}, props)\n    }\n  }\n  ","import updateNodeElement from \"./updateNodeElement\";\n\nexport default function createDOMElement(virtualDOM) {\n    let newElement = null;\n    if (virtualDOM.type === 'text') {\n        // 文本节点 使用createTextNode创建\n        newElement = document.createTextNode(virtualDOM.props.textContent);\n    } else {\n        // 元素节点 使用 createElement 创建\n        newElement = document.createElement(virtualDOM.type);\n        updateNodeElement(newElement, virtualDOM);\n    }\n    return newElement;\n}","export { default as createDOMElement } from './createDOMElement';\nexport { default as updateNodeElement } from './updateNodeElement';","export default function updateNodeElement(newElement, virtualDOM, oldVirtualDOM = {}) {\n    // 获取节点对应的属性对象\n    const newProps = virtualDOM.props || {};\n    // 获取旧的属性对象\n    const oldProps = oldVirtualDOM.props || {};\n\n    if (virtualDOM.type === 'text') {\n        if (newProps.textContent !== oldProps.textContent) {\n            // 判断父级节点是否相同，如果不同就将当前文本追加到父级\n            if (virtualDOM.parent.type !== oldVirtualDOM.parent.type) {\n                virtualDOM.parent.stateNode.appencChild(document.createTextNode(newProps.textContent))\n            } else {\n                // 新的文本节点替换旧的文本节点\n                virtualDOM.parent.stateNode.replaceChild(document.createTextNode(newProps.textContent), oldVirtualDOM.stateNode);\n            }\n        }\n        return;\n    }\n\n    Object.keys(newProps).forEach(propName => {\n        // 新的属性值\n        const newPropsValue = newProps[propName];\n        // 旧的属性值\n        const oldPropsValue = oldProps[propName];\n        // 对比是否相同\n        if (newPropsValue !== oldPropsValue) {\n            // 判断是否是事件属性\n            if (propName.startsWith('on')) {\n                // 截取出事件名称\n                const eventName = propName.toLowerCase().slice(2);\n                // 为元素添加事件\n                newElement.addEventListener(eventName, newPropsValue);\n                // 如果存在原有事件，需要删除掉。\n                if (oldPropsValue) {\n                    newElement.removeEventListener(eventName, oldPropsValue);\n                }\n            } else if (propName === 'value' || propName === 'checked') {\n                // 如果属性名是value或者checked不能使用setAttribute来设置，直接以属性方式设置即可\n                newElement[propName] = newPropsValue;\n            } else if (propName !== 'children') {\n                // 排除children\n                if (propName === 'className') {\n                    newElement.setAttribute('class', newPropsValue)\n                } else {\n                    newElement.setAttribute(propName, newPropsValue)\n                }\n            }\n        }\n    })\n    // 判断属性被删除的情况\n    Object.keys(oldProps).forEach(propName => {\n        // 新的属性值\n        const newPropsValue = newProps[propName];\n        // 旧的属性值\n        const oldPropsValue = oldProps[propName];\n        if (!newPropsValue) {\n            // 判断是否是事件属性\n            if (propName.startsWith('on')) {\n                // 截取出事件名称\n                const eventName = propName.toLowerCase().slice(2);\n                // 删除事件\n                newElement.removeEventListener(eventName, oldPropsValue);\n            } else if (propName !== 'children') {\n                newElement.removeAttribute(propName);\n            }\n        }\n    })\n}","const arrified = arg => Array.isArray(arg) ? arg : [arg]\n\nexport default arrified;","const createTaskQueue = () => {\n    const taskQueue = [];\n    return {\n        push: item => { // 向任务队列中添加任务\n            return taskQueue.push(item);\n        },\n        pop: () => { // 从任务队列中获取任务\n            return taskQueue.shift();\n        },\n        isEmpty: () => { // 判断是否存在任务\n            return taskQueue.length === 0\n        }\n    }\n}\n\nexport default createTaskQueue;","export const createReactInstance = fiber => {\n    let instance = null;\n    \n    if (fiber.tag === 'class_component') {\n        instance = new fiber.type(fiber.props)\n    } else {\n        instance = fiber.type;\n    }\n    return instance;\n}","import { createDOMElement } from '../../DOM'\nimport { createReactInstance } from '../createReactInstance';\n\nconst createStateNode = fiber => {\n    // 普通节点\n    if (fiber.tag === 'host_component') {\n        return createDOMElement(fiber)\n    } else {\n        // 组件\n        return createReactInstance(fiber)\n    }\n}\n\nexport default createStateNode;","const getRoot = instance => {\n    let fiber = instance.__fiber\n    while (fiber.parent) {\n        fiber = fiber.parent\n    }\n    return fiber;\n}\n\nexport default getRoot;","import { Component } from '../../Component';\nconst getTag = vdom => {\n    // 如果是普通节点\n    if (typeof vdom.type === 'string') {\n        return 'host_component'\n    } else if (Object.getPrototypeOf(vdom.type) === Component) {\n        // 如果是类组件\n        return 'class_component'\n    } else {\n        // 函数组件\n        return 'function_component'\n    }\n}\n\nexport default getTag;","export { default as createTaskQueue } from './CreateTaskQueue';\nexport { default as arrified } from './Arrified';\nexport { default as createStateNode } from './createStateNode';\nexport { default as getTag } from './getTag';\nexport { default as getRoot } from './getRoot';\n","import createElement from './CreateElement';\n\nexport { render } from './reconciliation'\n\nexport { Component } from './Component';\n\nexport default {\n    createElement,\n}","import {\n    updateNodeElement\n} from '../DOM';\nimport {\n    createTaskQueue,\n    arrified,\n    createStateNode,\n    getTag,\n    getRoot\n} from '../Misc';\n// 任务队列\nconst taskQueue = createTaskQueue();\n// 要执行的子任务\nlet subTask = null;\n// 存储即将渲染dom的fiber\nlet pendingCommit = null;\n\nconst commitAllWork = fiber => {\n    // 循环 effets 数组 构建 DOM 节点树\n    fiber.effects.forEach(item => {\n        // 如果是类组件就将fiber备份存储到实例中\n        if (item.tag === 'class_component') {\n            // 处理的是类组件\n            item.stateNode.__fiber = item;\n        }\n        // 删除操作\n        if (item.effectTag === 'delete') {\n            item.parent.stateNode.removeChild(item.stateNode);\n        } else if (item.effectTag === 'update') {\n            // 更新操作\n            if (item.type === item.alternate.type) {\n                // 节点类型相同\n                updateNodeElement(item.stateNode, item, item.alternate);\n            } else {\n                // 节点类型不同\n                item.parent.stateNode.replaceChild(item.stateNode, item.alternate.stateNode);\n            }\n        } else if (item.effectTag === 'placement') {\n            // 向页面中追加节点\n            // 当前要追加的子节点\n            let fiber = item;\n            // 当前要追加的子节点的父级\n            let parentFiber = item.parent\n            // 找到普通节点父级 排除组件父级 因为组件父级是不能直接追加真实DOM节点的\n            while (parentFiber.tag === 'class_component' || parentFiber.tag === 'function_component') {\n                parentFiber = parentFiber.parent;\n            }\n            // 如果子节点是普通节点 找到父级 将子节点追加到父级中\n            if (fiber.tag === 'host_component') {\n                parentFiber.stateNode.appendChild(fiber.stateNode);\n            }\n        }\n    })\n    // 备份旧的Fiber节点对象\n    fiber.stateNode.__rootFiberContainer = fiber;\n}\n\nconst getFirstTask = () => {\n    // 从任务队列中获取任务\n    const task = taskQueue.pop();\n    if (task.from === 'class_component') {\n        const root = getRoot(task.instance);\n        // 将要更新的状态存储起来\n        task.instance.__fiber.partialState = task.partialState;\n        return {\n            props: root.props,\n            stateNode: root.stateNode,\n            tag: 'host_root',\n            effects: [],\n            child: null,\n            alternate: root // root就是备份\n        };\n    }\n    // 返回最外层节点Fiber对象\n    return {\n        props: task.props,\n        stateNode: task.dom,\n        tag: 'host_root',\n        effects: [],\n        child: null,\n        alternate: task.dom.__rootFiberContainer\n    }\n}\n\nconst reconcileChildren = (fiber, children) => {\n    // 将children转换成数组\n    const arrifiedChildren = arrified(children);\n    // 循环 children 使用的索引\n    let index = 0;\n    // children 数组中元素的个数\n    let numberOfElements = arrifiedChildren.length;\n    // 循环过程中的循环项 就是子节点的 virtualDOM 对象\n    let element = null;\n    // 当前正在构建的的Fiber\n    let newFiber = null;\n    // 存储前一个节点，用于构建兄弟关系\n    let prevFiber = null;\n\n    let alternate = null;\n    // 如果有对象就获取子节点\n    if (fiber.alternate && fiber.alternate.child) {\n        // 如果找得到这个子节点就是children数组中的第一个节点的备份节点\n        alternate = fiber.alternate.child;\n    }\n    while (index < numberOfElements || alternate) {\n        // 子级虚拟DOM对象\n        element = arrifiedChildren[index];\n        // 如果element不存在，alternate存在，就是删除\n        if (!element && alternate) {\n            // 删除节点\n            alternate.effectTag = 'delete'\n            // 添加到父级的effects数组中\n            fiber.effects.push(alternate);\n        } else if (element && alternate) {\n            // 更新操作\n            newFiber = {\n                type: element.type,\n                props: element.props,\n                tag: getTag(element),\n                effects: [],\n                effectTag: 'update', // 新增\n                parent: fiber,\n                alternate,\n            }\n            if (element.type === alternate.type) {\n                // 类型相同\n                newFiber.stateNode = alternate.stateNode;\n            } else {\n                // 类型不同\n                newFiber.stateNode = createStateNode(newFiber);\n            }\n        } else if (element && !alternate) {\n            // 初始渲染\n            // 子级fiber\n            newFiber = {\n                type: element.type,\n                props: element.props,\n                tag: getTag(element),\n                effects: [],\n                effectTag: 'placement', // 新增\n                parent: fiber,\n            }\n            // 为fiber节点添加DOM对象或组件实例对象\n            newFiber.stateNode = createStateNode(newFiber);\n        }\n\n        // 如果第一个子节点就赋值到fiber上\n        if (index === 0) {\n            fiber.child = newFiber;\n        } else if (element) {\n            // 否则放在前一个的兄弟节点上\n            prevFiber.sibling = newFiber;\n        }\n        // 更新alternate\n        if (alternate && alternate.sibling) {\n            alternate = alternate.sibling;\n        } else {\n            alternate = null;\n        }\n        prevFiber = newFiber;\n        index++;\n    }\n}\n\nconst executeTask = fiber => {\n    // 构建子级fiber对象\n    if (fiber.tag === 'class_component') {\n        // 更新state\n        if (fiber.stateNode.__fiber && fiber.stateNode.__fiber.partialState) {\n            fiber.stateNode.state = {\n                ...fiber.stateNode.state,\n                ...fiber.stateNode.__fiber.partialState\n            }\n        }\n        reconcileChildren(fiber, fiber.stateNode.render())\n    } else if (fiber.tag === 'function_component') {\n        reconcileChildren(fiber, fiber.stateNode(fiber.props))\n    } else {\n        reconcileChildren(fiber, fiber.props.children)\n    }\n    // 有子级返回子级\n    if (fiber.child) {\n        return fiber.child\n    }\n    // 存储当前正在处理的对象\n    let currentExecutelyFiber = fiber;\n\n    while (currentExecutelyFiber.parent) {\n        currentExecutelyFiber.parent.effects = currentExecutelyFiber.parent.effects.concat(currentExecutelyFiber.effects.concat(currentExecutelyFiber))\n        // 有同级返回同级\n        if (currentExecutelyFiber.sibling) {\n            return currentExecutelyFiber.sibling\n        }\n        // 没有同级将父级给到循环，循环检查父级\n        currentExecutelyFiber = currentExecutelyFiber.parent\n    }\n    pendingCommit = currentExecutelyFiber;\n}\n\nconst workLoop = deadline => {\n    // 如果子任务不存在获取一个任务\n    if (!subTask) {\n        subTask = getFirstTask()\n    }\n    // 任务存在并且浏览器空余时间大于1ms执行任务\n    while (subTask && deadline.timeRemaining() > 1) {\n        // executeTask 方法执行任务 接受任务 返回新的任务\n        subTask = executeTask(subTask);\n    }\n    // 执行第二阶段\n    if (pendingCommit) {\n        commitAllWork(pendingCommit)\n    }\n}\n\nconst performTask = deadline => {\n    // 执行任务\n    workLoop(deadline);\n    // 判断任务是否存在，判断队列中是否有任务没有执行\n    if (subTask || !taskQueue.isEmpty()) {\n        requestIdleCallback(performTask)\n    }\n}\n\nexport const render = (element, dom) => {\n    // 1. 向任务队列中添加任务\n    taskQueue.push({\n        dom, // 父级\n        props: {\n            children: element // 子级\n        }\n    })\n    // 任务就是通过 vdom 对象 构建 fiber 对象\n    // 2. 指定在浏览器空闲时执行任务\n    requestIdleCallback(performTask)\n}\n\nexport const scheduleUpdate = (instance, partialState) => {\n    // 更新state的任务添加到任务队列中\n    taskQueue.push({\n        from: 'class_component',\n        instance,\n        partialState\n    })\n    // 指定在浏览器空闲时执行任务\n    requestIdleCallback(performTask)\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import React, { render, Component } from './react';\nconst jsx = <div>\n    <p>Hello Fiber</p>\n    <p>Hi Fiber</p>\n</div>\n\nconst root = document.getElementById('root');\n\nclass Demo extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            name: 'yd'\n        }\n    }\n    render() {\n        return <div>\n            <div>{this.state.name}</div>\n            <button onClick={() => { this.setState({ name: 'yindong'})}}>button</button>\n        </div>\n    }\n}\n\nrender(<Demo />, root)"],"sourceRoot":""}